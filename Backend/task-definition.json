{
  "family": "athletiq-backend",
  "networkMode": "awsvpc",
  "requiresCompatibilities": ["FARGATE"],
  "cpu": "256",
  "memory": "512",
  "executionRoleArn": "arn:aws:iam::555434054017:role/ecsTaskExecutionRole",
  "containerDefinitions": [
    {
      "name": "athletiq-backend",
      "image": "555434054017.dkr.ecr.us-east-2.amazonaws.com/athletiq-backend:latest",
      "portMappings": [
        {
          "containerPort": 4000,
          "protocol": "tcp"
        }
      ],
      "secrets": [
        { "name": "DATABASE_URL",            "valueFrom": "arn:aws:ssm:us-east-2:555434054017:parameter/athletiq/DATABASE_URL" },
        { "name": "AWS_ACCESS_KEY_ID",       "valueFrom": "arn:aws:ssm:us-east-2:555434054017:parameter/athletiq/AWS_ACCESS_KEY_ID" },
        { "name": "AWS_SECRET_ACCESS_KEY",   "valueFrom": "arn:aws:ssm:us-east-2:555434054017:parameter/athletiq/AWS_SECRET_ACCESS_KEY" },
        { "name": "S3_ACCESS_KEY_ID",        "valueFrom": "arn:aws:ssm:us-east-2:555434054017:parameter/athletiq/S3_ACCESS_KEY_ID" },
        { "name": "S3_SECRET_ACCESS_KEY",    "valueFrom": "arn:aws:ssm:us-east-2:555434054017:parameter/athletiq/S3_SECRET_ACCESS_KEY" },
        { "name": "PLAYGROUND_API_KEY",      "valueFrom": "arn:aws:ssm:us-east-2:555434054017:parameter/athletiq/PLAYGROUND_API_KEY" },
        { "name": "PLAYGROUND_PASSWORD",     "valueFrom": "arn:aws:ssm:us-east-2:555434054017:parameter/athletiq/PLAYGROUND_PASSWORD" },
        { "name": "PLAYGROUND_USER_EMAIL",   "valueFrom": "arn:aws:ssm:us-east-2:555434054017:parameter/athletiq/PLAYGROUND_USER_EMAIL" }
      ],
      "environment": [
        { "name": "AWS_REGION",         "value": "us-east-2" },
        { "name": "SES_FROM_EMAIL",     "value": "no-reply@athletiq.fitness" },
        { "name": "APP_URL",            "value": "https://athletiq.fitness" },
        { "name": "S3_BUCKET_NAME",     "value": "athletiq-profile-pictures" },
        { "name": "PLAYGROUND_USERNAME","value": "admin" }
      ],
      "logConfiguration": {
        "logDriver": "awslogs",
        "options": {
          "awslogs-group": "/ecs/athletiq-backend",
          "awslogs-region": "us-east-2",
          "awslogs-stream-prefix": "ecs"
        }
      },
      "essential": true
    }
  ]
}
